<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ISS Database</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');
* {margin:0;padding:0;box-sizing:border-box;}
body {font-family:'Space Grotesk',sans-serif;background:#0a0e27;color:#e8eaf6;min-height:100vh;padding:20px;}
header {display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
header h1 {font-size:22px;}
header a {color:#10b981;text-decoration:none;font-weight:600;}
table {width:100%;border-collapse:collapse;margin-top:20px;}
th, td {padding:8px 12px;text-align:center;border:1px solid rgba(102,126,234,0.3);}
th {background: rgba(102,126,234,0.1);}
tbody tr:nth-child(even) {background: rgba(102,126,234,0.05);}
</style>
</head>
<body>
<header>
  <h1>ISS Database Records</h1>
  <a href="/">← Back to Dashboard</a>
</header>

<table id="issTable">
  <thead>
    <tr>
      <th>Timestamp (UTC)</th>
      <th>Latitude (°)</th>
      <th>Longitude (°)</th>
      <th>Altitude (km)</th>
      <th>Velocity (km/h)</th>
    </tr>
  </thead>
  <tbody>
    <!-- Data will be injected here -->
  </tbody>
</table>

<script>
async function loadData(){
  try {
    const res = await fetch('/api/preview?day_index=0'); // same endpoint as dashboard
    const json = await res.json();
    const tbody = document.querySelector('#issTable tbody');
    tbody.innerHTML = ''; // clear existing rows

    if(!json.records || json.records.length === 0){
      tbody.innerHTML = '<tr><td colspan="5">No data available.</td></tr>';
      return;
    }

    json.records.forEach(r=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${r.ts_utc}</td>
        <td>${r.latitude.toFixed(4)}</td>
        <td>${r.longitude.toFixed(4)}</td>
        <td>${r.altitude.toFixed(2)}</td>
        <td>${r.velocity.toFixed(2)}</td>
      `;
      tbody.appendChild(tr);
    });
  } catch(err){
    console.error(err);
  }
}

// load data when page loads
loadData();
</script>
</body>
</html>
